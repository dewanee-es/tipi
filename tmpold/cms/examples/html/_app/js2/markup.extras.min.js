Mark.pipes.has=function(e,r,t){return e.some(function(e){return e[r]==t})},Mark.pipes.sift=function(e,r,t){return e.filter(function(e){return e[r]==t})},Mark.pipes.rand=function(e,r){var t=Mark._copy(e).sort(function(e,r){return Math.random()>.5?1:-1});return t.slice(0,r||1)},Mark.pipes.groupby=function(e,r){var t,n,a,i=[],u=[];for(t=0;t<e.length;t++)n=e[t][r],-1===i.indexOf(n)&&(i.push(n),u.push({items:[]}));for(t=0;t<e.length;t++)n=e[t][r],a=i.indexOf(n),u[a].key=n,u[a].items.push(e[t]);return u},Mark.pipes.alpha=function(e,r){var t,n,a=[],i="";for(t=0;t<e.length;t++)n=e[t][r].charAt(0).toUpperCase(),-1===i.indexOf(n)&&(i+=n,a[i.indexOf(n)]={key:n,items:[]}),a[i.indexOf(n)].items.push(e[t]);for(t=0;t<a.length;t++)a[t].items.sort(function(e,t){return e[r]>t[r]?1:-1});return a},Mark.pipes.date=function(e){return new Date(+e||e).toLocaleDateString()},Mark.pipes.time=function(e){return new Date(+e||e).toLocaleTimeString()},Mark.pipes.datetime=function(e){return new Date(+e||e).toLocaleString()},Mark.pipes.moment=function(e,r){return moment(new Date(+e||e)).format(r)},Mark.pipes.fromnow=function(e){return moment(new Date(+e||e)).fromNow()},Mark.pipes.datetime=function(e,r){e=new Date(+e||e),r=r||"l, F j, Y g:i a";var t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=["January","February","March","April","May","June","July","August","September","October","November","December"],a=e.getHours(),i=("0"+e.getMinutes()).substr(-2),u=t[e.getDay()],o=n[e.getMonth()],p=e.getDate(),s=e.getFullYear();return r.replace(/[a-z]/gi,function(r){return{g:a%12||12,G:a,i:i,a:12>a?"a.m.":"p.m.",A:12>a?"A.M.":"P.M.",D:u.substr(0,3),l:u,n:e.getMonth()+1,m:("0"+(e.getMonth()+1)).substr(-2),M:o.substr(0,3),F:o,j:p,d:("0"+p).substr(-2),Y:s,y:s.toString().substr(-2)}[r]})},Mark.pipes.pluralize=function(e,r){var t={en:function(e,r){return e[1===r?0:1]}},n=(navigator.language||navigator.userLanguage).split("-")[0];return t[n]||(n="en"),t[n](e.split(";;"),+r).trim()},Mark.pipes.numberformat=function(e,r,t){var n=(+e).toFixed(r).match(/\d+/g),a=n[0].length%3,i=n[1]?"."+n[1]:"",u=a?[n[0].slice(0,a)]:[],o=t&&e>0?"+":0>e?"-":"";return o+u.concat(n[0].slice(a).match(/\d{3}/g)||[]).join()+i},Mark.pipes.dollars=function(e){return accounting.formatMoney(+e)},Mark.pipes.euros=function(e){return accounting.formatMoney(+e,"â‚¬",2,".",",")},Mark.pipes.phone=function(e){var r=e.replace(/[^\d]/g,"");return"("+r.substr(0,3)+") "+r.substr(3,3)+"-"+r.substr(6,4)},Mark.pipes.ordinal=function(e){return e>10&&20>e?e+"th":e+["th","st","nd","rd","th","th","th","th","th","th"][e%10]},Mark.pipes.percent=function(e,r){return(1>e?100*e:e).toFixed(r||0)+"%"},Mark.pipes.runtime=function(e,r){var t=Math.floor(e/(60*(r||1))),n=Math.floor(e/(r||1)%60);return t+":"+("00"+n).substr(-2)},Mark.pipes.plus=function(e,r){return e+ +r},Mark.pipes.minus=function(e,r){return e-+r},Mark.pipes.times=function(e,r){return e*+r},Mark.pipes.sanitize=function(e){var r="<>&\"'/",t=["&lt;","&gt;","&amp;","&quot;","&#39;","&#x2F;"];return e.replace(new RegExp(r,"g"),function(e){return t[r.indexOf(e)]})},Mark.pipes.headline=function(e){var r="a,an,the,for,to,of,on,as,in,and,from".split(",");return e.replace(/\b\w+/g,function(e,t){return r.indexOf(e)>-1&&t>0?e:e.charAt(0).toUpperCase()+e.slice(1)})},Mark.pipes.repeat=function(e,r,t){return new Array(+r||2).join(e+(t||""))+e},Mark.pipes.bust=function(e){return e+(e.indexOf("?")>-1?"&":"?")+"cache="+ +new Date},Mark.pipes.breaklines=function(e){return e.replace(/\n/g,"<br>")},Mark.pipes.grafs=function(e){return e.replace(/(.+)/g,function(e,r){return"<p>"+r+"</p>"})},Mark.pipes.links=function(e){return e.replace(/\b(https?:[^\b\s]+)\b/g,'<a href="$1">$1</a>')},Mark.pipes.tweet=function(e){return e.replace(/(@\w+)/g,'<a href="http://twitter.com/#!/$1">$1</a>')},Mark.pipes.address=function(e){return'<a href="http://maps.google.com/maps?q='+encodeURI(e)+">"+e+"</a>"},Mark.pipes.inject=function(e){var r=arguments;return e.replace(/\[(\d+)\]/g,function(e,t){return r[+t+1]||""})},Mark.pipes.highlight=function(e,r){return e.replace(new RegExp("("+r+")","g"),"<em>$1</em>")};