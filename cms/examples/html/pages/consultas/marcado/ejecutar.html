<!-- Content Header (Page header) -->
<section class="content-header">
	<h1>Ejecutar marcado</h1>
	<ol class="breadcrumb">
		<li><a href="#"><i class="fa fa-cube"></i> Inicio</a></li>
		<li>Marcado</li>
		<li class="active">Ejecutar marcado</li>
	</ol>
</section>

<!-- Main content -->
<section class="content">

	<div class="row">
		<div class="col-md-6">
			<a href="javascript:;" ng-click="mostrarFiltroApps()">
				<div class="info-box bg-yellow marcado">
	                <span class="info-box-icon"><i class="fa fa-building"></i></span>
	                <div class="info-box-content">
	                  <span class="info-box-text">Ejecutar marcado</span>
	                  <span class="info-box-number">APPs</span>
	                </div><!-- /.info-box-content -->
	            </div>
            </a>
		</div>
		<div class="col-md-6">
			<a href="javascript:;" ng-click="mostrarFiltroInmuebles()">
				<div class="info-box bg-light-blue marcado">
	                <span class="info-box-icon"><i class="fa fa-home"></i></span>
	                <div class="info-box-content">
	                  <span class="info-box-text">Ejecutar marcado</span>
	                  <span class="info-box-number">Inmuebles</span>
	                </div><!-- /.info-box-content -->
	            </div>
            </a>
		</div>
	</div>
	
	<div class="row" ng-show="ejecutar != 0">
		<div class="col-xs-12">
			<div class="box {{ ejecutar == 1 ? 'box-warning' : 'box-primary' }}">
				<div class="box-header with-border">
					<h3 class="box-title" ng-show="ejecutar == 1">Seleccione los datos de las APPs a marcar:</h3>
					<h3 class="box-title" ng-show="ejecutar == 2">Seleccione los datos de los inmuebles a marcar:</h3>
				</div>
				<!-- /.box-header -->
				<form class="form-horizontal">
					<div class="box-body">
						<div class="form-group">
							<label for="cpro" class="col-xs-3 control-label">Provincia</label>
							<div class="col-xs-9">
								<select id="provinciaSelect" data-ng-model="provinciaSelect"
									class="form-control select2"
									data-ng-options="provincia.dcProv for provincia in provincias | orderStringBy: 'dcProv'"
									data-ng-change="getMunicipios(provinciaSelect.cpro)">
									<option value="">TODAS</option>
								</select>
							</div>
						</div>
						<div class="form-group" ng-show="provinciaSelect">
							<label for="cmun" class="col-xs-3 control-label">Municipio</label>
							<div class="col-xs-9">
								<select id="municipioSelect" data-ng-model="municipioSelect"
									class="form-control select2"
									data-ng-options="municipio.dcCmun for municipio in municipios | orderStringBy: 'dcCmun' track by municipio.cmun"
									data-ng-change="getUPs(provinciaSelect.cpro,municipioSelect.cmun)">
									<option value="">TODOS</option>
								</select>
							</div>
						</div>
						<div class="form-group" ng-show="municipioSelect">
							<label for="cpro" class="col-xs-3 control-label">Unidad Poblacional</label>
							<div class="col-xs-9">
								<select id="upSelect" data-ng-model="upSelect"
									class="form-control select2"
									data-ng-options="descripcionUP(up) for up in ups | orderStringBy: descripcionUP"
									data-ng-change="getVias(provinciaSelect.cpro,municipioSelect.cmun,upSelect[2],upSelect[3],upSelect[4])">
									<option value="">TODAS</option>
								</select>
							</div>
						</div>
						<div class="form-group" ng-show="upSelect">
							<label for="cpro" class="col-xs-3 control-label">Vía</label>
							<div class="col-xs-9">
								<select id="viaSelect" data-ng-model="viaSelect"
									class="form-control select2"
									data-ng-options="via.dcVia for via in vias | orderStringBy: 'dcVia' track by via.nidenCvia"
									data-ng-change="getApps(provinciaSelect.cpro,municipioSelect.cmun,upSelect[2],upSelect[3],upSelect[4],viaSelect.cvia,viaSelect.clase)">
									<option value="">TODAS</option>
								</select>
							</div>
						</div>
						<div class="form-group" ng-show="viaSelect && ejecutar == 2">
							<label for="cpro" class="col-xs-3 control-label">Aproximación Postal</label>
							<div class="col-xs-9">
								<select id="appSelect" data-ng-model="appSelect"
									class="form-control select2"
									data-ng-options="descripcionApp(app) for app in apps | orderStringBy: descripcionApp track by app.nidenApp">
									<option value="">TODAS</option>
								</select>
							</div>
						</div>
					</div>
					<!-- /.box-body -->
					<div class="box-footer">
						<button type="submit" class="btn btn-primary"
							data-ng-click="marcar(ejecutar,provinciaSelect,municipioSelect,upSelect,viaSelect,appSelect)">Marcar</button>
					</div>
				</form>
			</div>
			<!-- /.box -->
		</div>
	</div>
	
	<div class="row" ng-show="lanzado">
		<div class="col-xs-12">
			<div class="alert alert-success alert-dismissable">
                <h4><i class="icon fa fa-check"></i> En ejecución</h4>
                El proceso de marcado ha sido iniciado para los datos especificados
            </div>
		</div>
	</div>

</section>